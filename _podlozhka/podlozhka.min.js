/*! Podlozhka v1.0.0 | (c) 2014  <[object Object]> */
!function(a){"use strict";function b(a,b){e.x.val(parseFloat(a)),e.y.val(parseFloat(b))}var c=a("body").children(),d={},e={},f={};d.html='<div class="dnlv-podlozhka__body"></div><div class="dnlv-podlozhka__img"></div><div class="dnlv-podlozhka__form dnlv-podlozhka-twbs"><div class="modal-content"><div class="modal-header"><h4 class="modal-title">Podlozhka</h4></div><div class="modal-body"><div class="form-group"><label for="dnlv-podlozhka-form-imgsrc">Path of image</label><input type="text" class="form-control" id="dnlv-podlozhka-form-imgsrc" placeholder="_podlozhka/img/img.png" value="_podlozhka/img/img.png"></div><div class="form-group"><label>Margins</label><div class="form-inline"><div class="input-group"><span class="input-group-addon">left:</span><input type="text" class="form-control" id="dnlv-podlozhka-form-imgx"><span class="input-group-addon">px</span></div><div class="input-group"><span class="input-group-addon">top:</span><input type="text" class="form-control" id="dnlv-podlozhka-form-imgy"><span class="input-group-addon">px</span></div></div></div></div></div></div>',d.css='<link rel="stylesheet" href="_podlozhka/podlozhka.min.css">',d.img_src="",a("body").append(d.html),a("head").append(d.css),d.body=a(".dnlv-podlozhka__body"),d.img_wrap=a(".dnlv-podlozhka__img"),e.img_src=a("#dnlv-podlozhka-form-imgsrc"),e.x=a("#dnlv-podlozhka-form-imgx"),e.y=a("#dnlv-podlozhka-form-imgy"),c.each(function(){var b,c=a(this);"script"!==c.nodeName&&(b=c.detach(),d.body.append(b))}),d.mouse_positions={x:0,y:0},d.img_positions={x:0,y:0},e.img_src.on("keyup",function(){d.img_src=e.img_src.val(),d.img_wrap.css({"background-image":"url("+d.img_src+")"}),f.mousedown=!1,b(d.mouse_positions.x,d.mouse_positions.y),d.img_wrap.on("mousedown",function(a){return f.mousedown?void 0:(f.mousedown=!0,d.mouse_positions.x=a.pageX,void(d.mouse_positions.y=a.pageY))}),d.img_wrap.on("mousemove",function(a){var b,c;f.mousedown&&(b=d.img_positions.x+(a.pageX-d.mouse_positions.x),c=d.img_positions.y+(a.pageY-d.mouse_positions.y),d.img_wrap.css({"background-position":b+"px "+c+"px"}))}),d.img_wrap.on("mouseup",function(){var a;return f.mousedown&&(f.mousedown=!1,a=d.img_wrap.css("background-position").match(/^([0-9\-\+\.]*)px ([0-9\-\+\.]*)px$/i))?(d.img_positions.x=parseFloat(a[1]),d.img_positions.y=parseFloat(a[2]),void b(a[1],a[2])):void 0})}),e.x.on("keyup",function(){d.img_positions.x=parseFloat(a(this).val()),d.img_wrap.css({"background-position":d.img_positions.x+"px "+d.img_positions.y+"px"})}),e.y.on("keyup",function(){d.img_positions.y=parseFloat(a(this).val()),d.img_wrap.css({"background-position":d.img_positions.x+"px "+d.img_positions.y+"px"})})}(jQuery);